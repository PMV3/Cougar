<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YW913537F4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YW913537F4');
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=1600">
    <title>PMV 3 - FCF</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="step1-styles.css">
    <style>
        /* FCF specific styles */
        .quick-info-bar-fcf {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary-dark) 100%);
            padding: 1rem 1.25rem;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            align-items: end;
            color: white;
            max-width: 600px;
        }
        .engine-readings-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            padding: 0.5rem 0;
        }
        .reading-field {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }
        .reading-field label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .reading-field input {
            padding: 0.625rem 0.875rem;
            border: 1.5px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 0.9375rem;
            font-weight: 500;
            text-align: center;
            transition: var(--transition);
            background: var(--bg-card);
        }
        .reading-field input:focus {
            outline: none;
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        /* FCF Tabs */
        .fcf-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--border);
            padding-bottom: 0.5rem;
        }
        .fcf-tab {
            padding: 0.75rem 1.25rem;
            border: none;
            background: var(--bg-main);
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: var(--radius-md) var(--radius-md) 0 0;
            transition: var(--transition);
            text-transform: uppercase;
        }
        .fcf-tab:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
        }
        .fcf-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
        }
        /* Tab content */
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        /* Results grid */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        .result-field {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }
        .result-field label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
        }
        .result-field input, .result-field select {
            padding: 0.625rem 0.875rem;
            border: 1.5px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 0.9375rem;
            font-weight: 500;
            background: var(--bg-main);
            color: var(--text-primary);
        }
        .result-field input[readonly] {
            background: var(--bg-main);
        }
        .full-width {
            grid-column: 1 / -1;
        }
        /* Chart section */
        .chart-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .chart-container canvas {
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            max-width: 100%;
            height: auto;
        }
        /* Remove number input arrows */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
    </style>
</head>
<body>
    <div class="container" style="border: 1px solid black; border-radius: 10px; padding: 10px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.785); max-width: 1600px; margin: 0 auto;">
    
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="brand">
                <img src="SAUDI_CARACAL_TRANSPARENT.png" alt="Cougar Helicopter" class="brand-logo" style="height: 60px; width: auto;">
                <div class="brand-text">
                    <h1>PMV 3</h1>
                    <span>COUGAR<br>AS 532 A2</span>
                </div>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab step" onclick="setActiveStep(this, 'STEP1')">STEP 1: Weight & Balance</button>
                <span class="nav-arrow">&#8594;</span>
                <button class="nav-tab step" onclick="setActiveStep(this, 'STEP2')">STEP 2: Performance</button>
                <span class="nav-arrow">&#8594;</span>
                <button class="nav-tab step" onclick="setActiveStep(this, 'STEP3')">STEP 3: Endurance</button>
                <button class="nav-tab step active" onclick="setActiveStep(this, 'FCF')">FCF</button>
            </nav>
            <img src="sqn-trans.png" alt="Squadron Logo" style="height: 80px; width: auto; filter: brightness(0) invert(1);">
        </div>
    </header>

    <!-- Main Container -->
    <div class="app-container">
        <div class="main-content">
            
            <!-- Quick Info Bar -->
            <div class="quick-info-bar-fcf">
                <div class="form-field">
                    <label for="qat">QAT (&deg;C)</label>
                    <input type="text" id="#qat" name="qat" placeholder="Enter OAT" value="-22">
                </div>
                <div class="form-field">
                    <label for="hp">HP (ft)</label>
                    <input type="text" id="#hp" name="hp" placeholder="Enter Altitude" value="6100">
                </div>
                <div class="form-field">
                    <label for="speed">Speed (kt)</label>
                    <input type="text" id="#speed" name="speed" placeholder="Enter Speed" value="130">
                </div>
            </div>

            <!-- ENGINE READINGS Card -->
            <div class="card" id="card-engine-readings">
                <div class="card-header" onclick="toggleCard('card-engine-readings')">
                    <h3>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/></svg>
                        Engine Readings
                    </h3>
                    <span class="card-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg></span>
                </div>
                <div class="card-body">
                    <div class="engine-readings-grid">
                        <div class="reading-field">
                            <label for="torque">Torque (%)</label>
                            <input type="number" id="#torque" name="torque" value="43.2">
                        </div>
                        <div class="reading-field">
                            <label for="nr_rpm">NR (rpm)</label>
                            <input type="number" id="#nr_rpm" name="nr_rpm" value="259">
                        </div>
                        <div class="reading-field">
                            <label for="actualNg">Actual NG (%)</label>
                            <input type="number" id="#actualNg" name="actualNg" value="98.3">
                        </div>
                        <div class="reading-field">
                            <label for="actualt4">T4 (&deg;C)</label>
                            <input type="number" id="#actualt4" name="actualt4" value="650">
                        </div>
                        <div class="reading-field">
                            <label for="nr_100">NR 100% (rpm)</label>
                            <input type="text" id="#nr_100" name="nr_100" value="265">
                        </div>
                    </div>
                </div>
            </div>

            <!-- FCF RESULTS Card -->
            <div class="card" id="card-fcf-results">
                <div class="card-header" onclick="toggleCard('card-fcf-results')">
                    <h3>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>
                        FCF Results
                    </h3>
                    <span class="card-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg></span>
                </div>
                <div class="card-body">
                    <!-- FCF Tabs -->
                    <div class="fcf-tabs">
                        <button class="fcf-tab active" onclick="switchFCFTab(this, 'tab-total')">Total Result</button>
                        <button class="fcf-tab" onclick="switchFCFTab(this, 'tab-correct-ng')">Correct NG</button>
                        <button class="fcf-tab" onclick="switchFCFTab(this, 'tab-engine-power')">Engine Power Check</button>
                        <button class="fcf-tab" onclick="switchFCFTab(this, 'tab-engine-condition')">Engine Condition</button>
                    </div>

                    <!-- Tab: Total Result -->
                    <div id="tab-total" class="tab-content active">
                        <div class="results-grid">
                            <div class="result-field">
                                <label>Corrected NG (%)</label>
                                <input type="text" id="total-corrected-ng" readonly>
                            </div>
                            <div class="result-field">
                                <label>MAX T4 (&deg;C)</label>
                                <input type="text" id="total-maxt4" readonly>
                            </div>
                            <div class="result-field">
                                <label>Point A</label>
                                <input type="text" id="total-point-a" readonly>
                            </div>
                            <div class="result-field">
                                <label>Point B</label>
                                <input type="text" id="total-point-b" readonly>
                            </div>
                            <div class="result-field">
                                <label>Net Margin (%)</label>
                                <input type="text" id="total-net-margin" readonly>
                            </div>
                            <div class="result-field">
                                <label>Gross Margin (%)</label>
                                <input type="text" id="total-gross-margin" readonly>
                            </div>
                            <div class="result-field">
                                <label>Engine Condition</label>
                                <input type="text" id="total-engine-condition" readonly>
                            </div>
                            <div class="result-field">
                                <label>Select JDD Option</label>
                                <select id="total-jdd-selection">
                                    <option value="with">Without JDD</option>
                                    <option value="without">With JDD</option>
                                </select>
                            </div>
                            <div class="result-field full-width">
                                <label>Engine Condition For T4 (&deg;C)</label>
                                <input type="text" id="total-t4-condition" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: Correct NG -->
                    <div id="tab-correct-ng" class="tab-content">
                        <div class="results-grid">
                            <div class="result-field full-width">
                                <label>Corrected NG (%)</label>
                                <input type="text" id="#corrected_ng" name="corrected_ng" placeholder="The result of CORRECTED NG" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: Engine Power Check -->
                    <div id="tab-engine-power" class="tab-content">
                        <div class="results-grid">
                            <div class="result-field full-width">
                                <label>Corrected NG (%)</label>
                                <input type="text" id="power-corrected-ng" readonly>
                            </div>
                            <div class="result-field">
                                <label>Point A</label>
                                <input type="text" id="#point_A" name="point_A" placeholder="The result of A point" readonly>
                            </div>
                            <div class="result-field">
                                <label>Point B</label>
                                <input type="text" id="#point_B" name="point_B" placeholder="The result of B point" readonly>
                            </div>
                            <div class="result-field">
                                <label>Net Margin (%)</label>
                                <input type="text" id="#net_margin" name="net_margin" placeholder="The result of Net Margin" readonly>
                            </div>
                            <div class="result-field">
                                <label>Gross Margin (%)</label>
                                <input type="text" id="#gross_margin" name="gross_margin" placeholder="The result of Gross Margin" readonly>
                            </div>
                            <div class="result-field full-width">
                                <label>Engine Condition</label>
                                <input type="text" id="#engin_condition" name="engin_condition" placeholder="The result of ENGINE CONDITION" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: Engine Condition -->
                    <div id="tab-engine-condition" class="tab-content">
                        <div class="results-grid">
                            <div class="result-field">
                                <label>MAX T4 (&deg;C)</label>
                                <input type="text" id="#maxit4" name="maxit4" placeholder="The result of MAX T4" readonly>
                            </div>
                            <div class="result-field">
                                <label>Select JDD Option</label>
                                <select id="jddSelection" onchange="toggleJDDOption()">
                                    <option value="with">Without JDD</option>
                                    <option value="without">With JDD</option>
                                </select>
                            </div>
                            <div class="result-field full-width">
                                <label>Engine Condition For T4 (&deg;C)</label>
                                <input type="text" id="#Enginconditionone" name="Enginconditionone" placeholder="The result of Engine Condition for T4" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
