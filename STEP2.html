<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YW913537F4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YW913537F4');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1600">
    <title>PMV 3 - Performance</title>
    <link rel="stylesheet" href="step1-styles.css">
    <style>
        .calc-btn {
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            padding: 0.75rem 1rem;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            border-radius: 8px;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(30, 64, 175, 0.3);
        }
        .calc-btn:hover { transform: translateY(-1px); }
        .btn-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 0.5rem; margin-bottom: 1rem; }
        .result-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; margin-bottom: 1rem; }
        .result-item { background: #f8fafc; border-radius: 6px; padding: 0.5rem; text-align: center; border: 1px solid #e2e8f0; }
        .result-item label { display: block; font-size: 0.75rem; color: #64748b; margin-bottom: 0.25rem; }
        .result-item input { width: 100%; text-align: center; border: none; background: transparent; font-weight: 600; color: #1e40af; }
        .chart-display { width: 100%; max-height: 600px; overflow: auto; background: #f8fafc; border-radius: 8px; }
        .chart-display img { max-width: 100%; height: auto; display: block; margin: 0 auto; }
        .chart-title { text-align: center; font-weight: 600; color: #1e40af; padding: 0.5rem; }
    </style>
</head><body style="overflow-x: hidden;">
    <div class="container" style="border: 1px solid black; border-radius: 10px; padding: 10px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.785); max-width: 1600px; margin: 0 auto;">
    <header class="app-header">
        <div class="header-content">
            <div class="brand">
                <img src="SAUDI_CARACAL_TRANSPARENT.png" alt="Logo" class="brand-logo">
                <div class="brand-text">
                    <h1>PMV 3</h1>
                    <span>COUGAR<br>AS 532 A2</span>
                </div>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab step" onclick="setActiveStep(this, 'STEP1')">STEP 1: Weight & Balance</button>
                <span class="nav-arrow">→</span>
                <button class="nav-tab step active" onclick="setActiveStep(this, 'STEP2')">STEP 2: Performance</button>
                <span class="nav-arrow">→</span>
                <button class="nav-tab step" onclick="setActiveStep(this, 'STEP3')">STEP 3: Endurance</button>
                <button class="nav-tab step" onclick="setActiveStep(this, 'FCF')">FCF</button>
            </nav>
            <img src="sqn-trans.png" alt="Squadron Logo" class="brand-logo" style="filter: brightness(0) invert(1); height: 80px;">
        </div>
    </header>
    <div class="main-content">
        <div class="cards-grid" style="grid-template-columns: 1fr;">
            <div class="card" id="card-performance">
                <div class="card-header" onclick="toggleCard('card-performance')">
                    <h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20V10"/><path d="M18 20V4"/><path d="M6 20v-4"/></svg>Performance Calculations</h3>
                    <span class="card-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg></span>
                </div>
                <div class="card-body">
                    <!-- Buttons -->
                    <div class="btn-grid">
                        <button class="calc-btn" onclick="runCalc('heightloss')">HEIGHT LOSS</button>
                        <button class="calc-btn" onclick="runCalc('weightindex')">WEIGHT INDEX</button>
                        <button class="calc-btn" onclick="runCalc('serviceceiling')">SERVICE CEILING</button>
                        <button class="calc-btn" onclick="runCalc('twinoge')">TWIN ENG OGE</button>
                        <button class="calc-btn" onclick="runCalc('twinige')">TWIN ENG IGE</button>
                        <button class="calc-btn" onclick="runCalc('oeiclimb')">OEI RATE OF CLIMB</button>
                    </div>
                    <!-- Results -->
                    <div class="result-grid">
                        <div class="result-item"><label>Height Loss</label><input type="text" id="#heightloose" readonly></div>
                        <div class="result-item"><label>Weight Index</label><input type="text" id="#Wheight_index_6" readonly></div>
                        <div class="result-item"><label>Service Ceiling</label><input type="text" id="#ceilinghp_3" readonly></div>
                        <div class="result-item"><label>Twin Eng OGE (ft)</label><input type="text" id="#enginhoge" readonly></div>
                        <div class="result-item"><label>Twin Eng OGE (lb)</label><input type="text" id="#enginhoge_weight" readonly></div>
                        <div class="result-item"><label>Twin Eng IGE (ft)</label><input type="text" id="#enginIGE" readonly></div>
                        <div class="result-item"><label>Twin Eng IGE (lb)</label><input type="text" id="#enginIGE_weight" readonly></div>
                        <div class="result-item"><label>OEI V/S at Vy</label><input type="text" id="#rc" readonly></div>
                    </div>
                    <!-- Chart Display -->
                    <div class="chart-title" id="chart-title">Select a calculation to view chart</div>
                    <div class="chart-display" id="chart-display" style="max-width: 100%; overflow: auto; max-height: 600px;">
                        <canvas id="curveCanvas" width="950" height="1300" style="background-image: url('first.jpg'); display: none;"></canvas>
                        <canvas id="curveCanvas1" width="960" height="1300" style="background-image: url('WeightIndexForRateofclime.jpg'); display: none;"></canvas>
                        <canvas id="curveCanvas2" width="560" height="820" style="background-image: url('third.jpg'); display: none;"></canvas>
                        <canvas id="curveCanvas3" width="733" height="817" style="background-image: url('newOGE.jpg'); display: none;"></canvas>
                        <canvas id="curveCanvas4" width="733" height="814" style="background-image: url('newIGE.jpg'); display: none;"></canvas>
                        <canvas id="curveCanvas5" width="920" height="1280" style="background-image: url('sixth.jpg'); display: none;"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    
    <!-- Hidden inputs needed by scripts -->
    <div style="display: none;">
        <input type="hidden" id="#acweight" value="AUW">
        <input type="hidden" id="#qat" value="Enter OAT">
        <input type="hidden" id="#hp" value="Enter Altitude">
        <input type="hidden" id="#wind" value="Enter Wind Speed">
        <input type="text" id="#weighindex">
        <input type="text" id="#ceilinghp_2">
        <input type="text" id="#ceilingweight_3">
        <input type="hidden" id="zfw">
        <div id="#for0"></div>
        <div id="#for1"></div>
        <div id="#for2"></div>
        <div id="#for3"></div>
        <div id="#for4"></div>
        <div id="#for5"></div>
    </div>
    <div class="toast-overlay" id="toast-overlay"></div>
    <script src="dataPersistence.js"></script>
    <script src="navigation.js"></script>
    <script src="./datafolder/heightloosemap.js"></script>
    <script src="./datafolder/weightindex.js"></script>
    <script src="./datafolder/serviceCeiling.js"></script>
    <script src="./datafolder/newhoge.js"></script>
    <script src="./datafolder/newIGE.js"></script>
    <script src="./datafolder/serviceclimbing.js"></script>
    <script src="./scripts.js"></script>
    <script src="step2DataHandler.js"></script>
    <script>
        function runCalc(type) {
            const titleEl = document.getElementById('chart-title');
            const titles = {
                'heightloss': 'Height Loss Chart',
                'weightindex': 'Weight Index Chart',
                'serviceceiling': 'Service Ceiling Chart',
                'twinoge': 'Twin Engine OGE Chart',
                'twinige': 'Twin Engine IGE Chart',
                'oeiclimb': 'OEI Rate of Climb Chart'
            };
            
            titleEl.textContent = titles[type] || 'Chart';
            
            // Call original functions - they handle canvas display via showchart()
            switch(type) {
                case 'heightloss': heightloosebuttondown(); break;
                case 'weightindex': weightindexbuttondown(); break;
                case 'serviceceiling': serviceilingbuttondown(); break;
                case 'twinoge': enginhogebuttondown(); break;
                case 'twinige': enginigebuttondown(); break;
                case 'oeiclimb': rcbuttondown(); break;
            }
        }
        
        function setActiveStep(element, stepId) {
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            element.classList.add('active');
            switch(stepId) {
                case 'STEP1': saveDataAndGoToStep1(); break;
                case 'STEP2': saveDataAndGoToStep2(); break;
                case 'STEP3': saveDataAndGoToStep3(); break;
                case 'FCF': saveDataAndNavigate('FCF.html'); break;
            }
        }
        
        function toggleCard(cardId) {
            document.getElementById(cardId).classList.toggle('collapsed');
        }
    </script>
</body>
</html>